namespace = flavor_carn

#The Ilivian question
country_event = { 
	id = flavor_carn.1
	title = flavor_carn.1.t
	desc = flavor_carn.1.d
	picture = TRADEGOODS_eventPicture
	is_triggered_only = yes
    fire_only_once = yes
    trigger = {
	OR = {
        tag = A22
        tag = A94
    }
    }
option = { #"We're better than the Reylleans - Let's give it back to the Sironians"
	name = flavor_carn.1.a
	240 = { #ilivian
        cede_province = A10
        add_core = A10
        remove_core = A22
        remove_core = A94
		}
	239 = { #sirasthenak
        cede_province = A10
        add_core = A10
        remove_core = A22
        remove_core = A94
		}
    reverse_add_opinion = {
        who = A10
        modifier = returned_province
        years = 25
    }
}
option = { #"What happened in Ilivian was tragic - We need to pay the debt the Reylleans accrued."
	name = flavor_carn.1.b
	240 = { #ilivian
        cede_province = A10
        add_core = A10
        remove_core = A22
        remove_core = A94
		}
	239 = { #sirasthenak
        cede_province = A10
        add_core = A10
        remove_core = A22
        remove_core = A94
		}
    reverse_add_opinion = {
        who = A10
        modifier = returned_province
        years = 25
    }
    add_treasury = -100
     reverse_add_opinion = {
        who = A10
        modifier = opinion_money_sent
        years = 25
    }
	}
option = { #"We conquered it rightfully from the Reylleans, we must demand compensation for the town."
	name = flavor_carn.1.c
    A10 = {country_event = {
	id = flavor_sironia.2
	days = 20
	random = 10	
	    }	
	}
}
option = { #"How dare! It's our land, if they want it back they should come and take it from us!"
	name = flavor_carn.1.f
	240 = {
        change_province_name = "Illeviane"
    }
    A22 = {
        add_historical_rival = A10
    }
    A94 = {
        add_historical_rival = A10
    }
    A10 = {
        add_historical_rival = A22
        add_historical_rival = A94
    }
	}
}

#Negotiations concluded
country_event = {
    id = flavor_carn.2
    title = flavor_carn.2.t
    desc = flavor_carn.2.d 
    picture = DECLARATION_INDEPENDENCE_eventPicture
    is_triggered_only = yes
    fire_only_once = yes
trigger = {
    OR = {
    tag = A22
    tag = A94
    }
}
option = { #"Then so it shall be!"
    name = flavor_carn.2.a 
	240 = { #ilivian
        cede_province = A10
        add_core = A10
        remove_core = A22
        remove_core = A94
		}
	239 = { #sirasthenak
        cede_province = A10
        add_core = A10
        remove_core = A22
        remove_core = A94
		}
    add_treasury = 100
    }
}

#The black library
country_event = {
    id = flavor_carn.3
    title = flavor_carn.3.t
    desc = flavor_carn.3.d
    picture = BIG_BOOK_eventPicture
    fire_only_once = yes
trigger = {
    OR = {
    tag = A22
    tag = A94
    }
    capital = 749
    adm_tech = 4
    NOT = { has_country_flag = daria_elernel}
    }
mean_time_to_happen = {
    months = 180
}
option = { #Deny his request. Who is this man, daring to come to the court asking for money?
    name = flavor_carn.3.a
    set_country_flag = daria_elernel
    add_prestige = 10
}
option = { #Accept his request, and give him the money he wants to start construction.
    name = flavor_carn.3.b
    set_country_flag = daria_elernel
    add_treasury = -150
    220 = {
        add_permanent_province_modifier = {
            name = the_black_library
            duration = -1
        }
        add_base_tax = 2
    }

}
option = { #Surely you know more about building libraries than your citizens?
    name = flavor_carn.3.c
    set_country_flag = daria_elernel
    add_treasury = -100
    220 = {
        add_building = temple
        }
    }
}
#the grand gathering [type I]
country_event = {
    id = flavor_carn.4
    title = flavor_carn.4.t
    desc = flavor_carn.4.d 
    picture = TRADEGOODS_EventPicture
    is_triggered_only = yes
    trigger = {
			NOT = { is_subject_of_type = personal_union }
            NOT = { has_country_modifier = hostile_takeover }
            NOT = {has_country_modifier = had_grand_gathering }
    		culture = carnian
        	OR = {
            NOT = { is_year = 1520 }
            AND = {
                is_year = 1520
                has_country_flag = contested_election
            }
        }
    }
    option = {
        name = flavor_carn.4.a
        ai_chance = { factor = 100 }
        define_ruler = {
            dynasty = Elernel
            min_age = 35 
            culture = carnian
            religion = aegmerism
            claim = 95
        }
        add_country_modifier = had_grand_gathering

    }
    option = {
        name = flavor_carn.4.b
        ai_chance = { factor = 0 }
        define_ruler = {
            min_age = 35
            culture = carnian
            religion = aegmerism
            change_adm = -1
            change_dip = -1
            change_mil = -1
            claim = 40
        }
        add_country_modifier = had_grand_gathering
    }
    }
#the grand gathering (type II)
country_event = {
    id = flavor_carn.5
    title = flavor_carn.4.t
    desc = flavor_carn.5.d
    picture = ELECTION_REPUBLICAN_eventPicture
    is_triggered_only = yes
    fire_only_once = yes
	trigger = {
		NOT = { is_subject_of_type = personal_union }
        NOT = { has_country_modifier = hostile_takeover }
        NOT = {has_country_modifier = had_grand_gathering }
        culture = carnian
        AND = {
            is_year = 1520
            has_country_flag = daria_elernel
        }
    }
    option = {
        name = flavor_carn.4.a
        ai_chance = { factor = 100 }
        define_ruler = {
            dynasty = Elernel
            min_age = 35 
            culture = carnian
            religion = aegmerism
            claim = 95
        }
        set_country_flag = contested_election
        add_country_modifier = had_grand_gathering

    }
    option = {
        name = flavor_carn.4.b
        ai_chance = { factor = 0 }
        define_ruler = {
            min_age = 35
            culture = carnian
            religion = aegmerism
            change_adm = -1
            change_dip = -1
            change_mil = -1
            claim = 40
        }
        set_country_flag = contested_election
        add_country_modifier = had_grand_gathering
    }

}
#the Elernel family
country_event = {
    id = flavor_carn.6
    title = flavor_carn.6.t
    desc = flavor_carn.6.d
    picture = ROYAL_COUPLE_FUTURE_eventPicture
    fire_only_once = yes
    trigger = {
        OR = {
            tag = A22
            tag = A94
        }
        dynasty = Elernel
        has_country_flag = daria_elernel
        NOT = {is_year = 1520}
    }
    mean_time_to_happen = {
        months = 36
    }

    option = {
        name = flavor_carn.6.a
        define_advisor = {
            type = commandant
            name = Daria
            skill = 2 
            location = 220
            discount = yes
            culture = carnian
            religion = aegmerism
        }
        add_legitimacy = 15
    }
    option = {
        name = flavor_carn.6.b
        add_prestige = 10
        clr_country_flag = daria_elernel
        220 = {
            remove_country_modifier = the_black_library
        }
    }
}
#all the small things
country_event = {
    id = flavor_carn.7
    title = flavor_carn.7.t
    desc = flavor_carn.7.d
    picture = MYSTIC_IN_PRAYER_eventPicture
    trigger = {
        religion = aegmerism
        has_truce = yes
        stabiliy = 0
        NOT = { has_country_modifier = all_the_small_things }
    }
    mean_time_to_happen = {
        months = 12
    }
    option = {
        name = flavor_carn.7.a
        add_adm_power = -35
        add_stability = 1
        add_country_modifier = {
            name = all_the_small_things
            duration = 10950
            hidden = yes
        }
    }
    option = {
        name = flavor_carn.7.b
        add_prestige = -15
        add_country_modifier = {
            name = all_the_small_things
            duration = 10950
            hidden = yes
        }
    }
    }
#hostile takeover
country_event = {
    id = flavor_carn.8
    title = flavor_carn.8.t
    desc = flavor_carn.8.d
    picture = NOBLE_ESTATE_DEMANDS_eventPicture
    fire_only_once = yes
trigger = {
    A22 = {
        has_country_modifier = hostile_takeover
    }
    A94 = {
        has_country_modifier = hostile_takeover
    }
}
option = {
    name = flavor_carn.8.a
    75 = { 
        add_stability = -2
        ROOT = { define_ruler = {
            name = "Daria"
            dynasty = "Elernel"
            adm = 5
            dip = 6
            mil = 6
            fixed = yes
            age = 53
            claim = 80
            male = yes
            culture = carnian
            religion = aegmerism
        }
        }
        clr_country_flag = contested_election
        }
    15 = {
    ROOT = { country_event = {
        id = flavor_carn.9
        days = 0
        random = 0
    }
    }
}
}
option = {
    name = flavor_carn.8.b
        ROOT = { define_ruler = {
            name = "Daria"
            dynasty = "Elernel"
            adm = 5
            dip = 6
            mil = 6
            fixed = yes
            age = 53
            claim = 80
            male = yes
            culture = carnian
            religion = aegmerism
        }
        clr_country_flag = contested_election
        }
}
option = {
    name = flavor_carn.8.c
    50 = { 
        add_stability = -2
        define_ruler = {
            name = "Daria"
            dynasty = "Elernel"
            adm = 5
            dip = 6
            mil = 6
            fixed = yes
            age = 53
            claim = 80
            male = yes
            culture = carnian
            religion = aegmerism
        }
        
        clr_country_flag = contested_election
        }    
    50 = {
        ROOT = { define_ruler = {
            name = "Daria"
            dynasty = "Elernel"
            adm = 5
            dip = 6
            mil = 6
            fixed = yes
            age = 53
            claim = 80
            male = yes
            culture = carnian
            religion = aegmerism
        }
        add_stability = -2
        clr_county_flag = contested_election
        }        
    }
    ROOT = { 50 = {  country_event = {
        id = flavor_carn.10
        days = 0
        random = 0
    }
    }
    }
}
}